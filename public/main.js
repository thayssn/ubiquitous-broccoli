"use strict";

function Canvas(width, height) {
  this.canvas = document.createElement('canvas');
  this.canvas.width = width;
  this.canvas.height = height;

  this.ctx = this.canvas.getContext("2d");
}

Canvas.prototype.displayCanvas = function (htmlNode) {
  htmlNode.appendChild(this.canvas);
};

Canvas.prototype.getPixelData = function () {
  return this.ctx.getImageData(0, 0, this.canvas.width, this.canvas.height);
};

Canvas.prototype.loadImage = function (img) {
  this.ctx.drawImage(img, 0, 0, img.width, img.height);
  this.originalPixelData = this.getPixelData();
};

Canvas.prototype.original = function () {
  this.ctx.putImageData(this.originalPixelData, 0, 0);
};

Canvas.prototype.grayscale = function () {
  var pixels = this.getPixelData();
  var d = pixels.data;
  for (var _i = 0; _i < d.length; _i += 4) {
    var avg = (d[_i] + d[_i + 1] + d[_i + 2]) / 3;
    d[_i] = avg; // red
    d[_i + 1] = avg; // green
    d[_i + 2] = avg; // blue
    d[_i + 3] = 255; // opacity
  }
  this.ctx.putImageData(pixels, 0, 0);
};

Canvas.prototype.opacity = function () {
  var pixels = this.getPixelData();
  var d = pixels.data;
  for (var _i2 = 0; _i2 < d.length; _i2 += 4) {
    d[_i2 + 3] = 155; // opacity
  }
  this.ctx.putImageData(pixels, 0, 0);
};

var c = new Canvas(800, 600);
c.displayCanvas(document.body);

var i = document.createElement("img");
i.src = "img/terminator.jpeg";
i.onload = function () {
  c.loadImage(i);
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9tYWluLmpzIl0sIm5hbWVzIjpbIkNhbnZhcyIsIndpZHRoIiwiaGVpZ2h0IiwiY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY3R4IiwiZ2V0Q29udGV4dCIsInByb3RvdHlwZSIsImRpc3BsYXlDYW52YXMiLCJodG1sTm9kZSIsImFwcGVuZENoaWxkIiwiZ2V0UGl4ZWxEYXRhIiwiZ2V0SW1hZ2VEYXRhIiwibG9hZEltYWdlIiwiaW1nIiwiZHJhd0ltYWdlIiwib3JpZ2luYWxQaXhlbERhdGEiLCJvcmlnaW5hbCIsInB1dEltYWdlRGF0YSIsImdyYXlzY2FsZSIsInBpeGVscyIsImQiLCJkYXRhIiwiaSIsImxlbmd0aCIsImF2ZyIsIm9wYWNpdHkiLCJjIiwiYm9keSIsInNyYyIsIm9ubG9hZCJdLCJtYXBwaW5ncyI6Ijs7QUFDQSxTQUFTQSxNQUFULENBQWdCQyxLQUFoQixFQUF1QkMsTUFBdkIsRUFBOEI7QUFDNUIsT0FBS0MsTUFBTCxHQUFjQyxTQUFTQyxhQUFULENBQXVCLFFBQXZCLENBQWQ7QUFDQSxPQUFLRixNQUFMLENBQVlGLEtBQVosR0FBb0JBLEtBQXBCO0FBQ0EsT0FBS0UsTUFBTCxDQUFZRCxNQUFaLEdBQXFCQSxNQUFyQjs7QUFFQSxPQUFLSSxHQUFMLEdBQVcsS0FBS0gsTUFBTCxDQUFZSSxVQUFaLENBQXVCLElBQXZCLENBQVg7QUFDRDs7QUFFRFAsT0FBT1EsU0FBUCxDQUFpQkMsYUFBakIsR0FBaUMsVUFBU0MsUUFBVCxFQUFtQjtBQUNsREEsV0FBU0MsV0FBVCxDQUFxQixLQUFLUixNQUExQjtBQUNELENBRkQ7O0FBSUFILE9BQU9RLFNBQVAsQ0FBaUJJLFlBQWpCLEdBQWdDLFlBQVU7QUFDeEMsU0FBTyxLQUFLTixHQUFMLENBQVNPLFlBQVQsQ0FBc0IsQ0FBdEIsRUFBd0IsQ0FBeEIsRUFBMEIsS0FBS1YsTUFBTCxDQUFZRixLQUF0QyxFQUE2QyxLQUFLRSxNQUFMLENBQVlELE1BQXpELENBQVA7QUFDRCxDQUZEOztBQUlBRixPQUFPUSxTQUFQLENBQWlCTSxTQUFqQixHQUE2QixVQUFTQyxHQUFULEVBQWE7QUFDeEMsT0FBS1QsR0FBTCxDQUFTVSxTQUFULENBQW1CRCxHQUFuQixFQUF3QixDQUF4QixFQUEyQixDQUEzQixFQUE4QkEsSUFBSWQsS0FBbEMsRUFBeUNjLElBQUliLE1BQTdDO0FBQ0EsT0FBS2UsaUJBQUwsR0FBeUIsS0FBS0wsWUFBTCxFQUF6QjtBQUNELENBSEQ7O0FBS0FaLE9BQU9RLFNBQVAsQ0FBaUJVLFFBQWpCLEdBQTRCLFlBQVk7QUFDdEMsT0FBS1osR0FBTCxDQUFTYSxZQUFULENBQXNCLEtBQUtGLGlCQUEzQixFQUE4QyxDQUE5QyxFQUFpRCxDQUFqRDtBQUNELENBRkQ7O0FBSUFqQixPQUFPUSxTQUFQLENBQWlCWSxTQUFqQixHQUE2QixZQUFZO0FBQ3ZDLE1BQUlDLFNBQVMsS0FBS1QsWUFBTCxFQUFiO0FBQ0EsTUFBSVUsSUFBSUQsT0FBT0UsSUFBZjtBQUNBLE9BQUssSUFBSUMsS0FBSSxDQUFiLEVBQWdCQSxLQUFJRixFQUFFRyxNQUF0QixFQUE4QkQsTUFBSyxDQUFuQyxFQUFzQztBQUNwQyxRQUFJRSxNQUFNLENBQUNKLEVBQUVFLEVBQUYsSUFBT0YsRUFBRUUsS0FBSSxDQUFOLENBQVAsR0FBa0JGLEVBQUVFLEtBQUksQ0FBTixDQUFuQixJQUErQixDQUF6QztBQUNBRixNQUFFRSxFQUFGLElBQVdFLEdBQVgsQ0FGb0MsQ0FFcEI7QUFDaEJKLE1BQUVFLEtBQUksQ0FBTixJQUFXRSxHQUFYLENBSG9DLENBR3BCO0FBQ2hCSixNQUFFRSxLQUFJLENBQU4sSUFBV0UsR0FBWCxDQUpvQyxDQUlwQjtBQUNoQkosTUFBRUUsS0FBSSxDQUFOLElBQVcsR0FBWCxDQUxvQyxDQUtwQjtBQUNqQjtBQUNELE9BQUtsQixHQUFMLENBQVNhLFlBQVQsQ0FBc0JFLE1BQXRCLEVBQThCLENBQTlCLEVBQWlDLENBQWpDO0FBQ0QsQ0FYRDs7QUFhQXJCLE9BQU9RLFNBQVAsQ0FBaUJtQixPQUFqQixHQUEyQixZQUFXO0FBQ3BDLE1BQUlOLFNBQVMsS0FBS1QsWUFBTCxFQUFiO0FBQ0EsTUFBSVUsSUFBSUQsT0FBT0UsSUFBZjtBQUNBLE9BQUssSUFBSUMsTUFBSSxDQUFiLEVBQWdCQSxNQUFJRixFQUFFRyxNQUF0QixFQUE4QkQsT0FBSyxDQUFuQyxFQUFzQztBQUNwQ0YsTUFBRUUsTUFBRSxDQUFKLElBQVMsR0FBVCxDQURvQyxDQUN0QjtBQUNmO0FBQ0QsT0FBS2xCLEdBQUwsQ0FBU2EsWUFBVCxDQUFzQkUsTUFBdEIsRUFBOEIsQ0FBOUIsRUFBaUMsQ0FBakM7QUFDRCxDQVBEOztBQVNBLElBQUlPLElBQUksSUFBSTVCLE1BQUosQ0FBVyxHQUFYLEVBQWdCLEdBQWhCLENBQVI7QUFDQTRCLEVBQUVuQixhQUFGLENBQWdCTCxTQUFTeUIsSUFBekI7O0FBRUEsSUFBSUwsSUFBSXBCLFNBQVNDLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBUjtBQUNBbUIsRUFBRU0sR0FBRixHQUFRLHFCQUFSO0FBQ0FOLEVBQUVPLE1BQUYsR0FBVyxZQUFVO0FBQ25CSCxJQUFFZCxTQUFGLENBQVlVLENBQVo7QUFDRCxDQUZEIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuZnVuY3Rpb24gQ2FudmFzKHdpZHRoLCBoZWlnaHQpe1xyXG4gIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgdGhpcy5jYW52YXMud2lkdGggPSB3aWR0aDtcclxuICB0aGlzLmNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XHJcblxyXG4gIHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG59XHJcblxyXG5DYW52YXMucHJvdG90eXBlLmRpc3BsYXlDYW52YXMgPSBmdW5jdGlvbihodG1sTm9kZSkge1xyXG4gIGh0bWxOb2RlLmFwcGVuZENoaWxkKHRoaXMuY2FudmFzKVxyXG59O1xyXG5cclxuQ2FudmFzLnByb3RvdHlwZS5nZXRQaXhlbERhdGEgPSBmdW5jdGlvbigpe1xyXG4gIHJldHVybiB0aGlzLmN0eC5nZXRJbWFnZURhdGEoMCwwLHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xyXG59O1xyXG5cclxuQ2FudmFzLnByb3RvdHlwZS5sb2FkSW1hZ2UgPSBmdW5jdGlvbihpbWcpe1xyXG4gIHRoaXMuY3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIGltZy53aWR0aCwgaW1nLmhlaWdodCk7XHJcbiAgdGhpcy5vcmlnaW5hbFBpeGVsRGF0YSA9IHRoaXMuZ2V0UGl4ZWxEYXRhKCk7XHJcbn07XHJcblxyXG5DYW52YXMucHJvdG90eXBlLm9yaWdpbmFsID0gZnVuY3Rpb24gKCkge1xyXG4gIHRoaXMuY3R4LnB1dEltYWdlRGF0YSh0aGlzLm9yaWdpbmFsUGl4ZWxEYXRhLCAwLCAwKTtcclxufTtcclxuXHJcbkNhbnZhcy5wcm90b3R5cGUuZ3JheXNjYWxlID0gZnVuY3Rpb24gKCkge1xyXG4gIGxldCBwaXhlbHMgPSB0aGlzLmdldFBpeGVsRGF0YSgpO1xyXG4gIGxldCBkID0gcGl4ZWxzLmRhdGE7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBkLmxlbmd0aDsgaSArPSA0KSB7XHJcbiAgICBsZXQgYXZnID0gKGRbaV0gKyBkW2kgKyAxXSArIGRbaSArIDJdKSAvIDM7XHJcbiAgICBkW2ldICAgICA9IGF2ZzsgLy8gcmVkXHJcbiAgICBkW2kgKyAxXSA9IGF2ZzsgLy8gZ3JlZW5cclxuICAgIGRbaSArIDJdID0gYXZnOyAvLyBibHVlXHJcbiAgICBkW2kgKyAzXSA9IDI1NTsgLy8gb3BhY2l0eVxyXG4gIH1cclxuICB0aGlzLmN0eC5wdXRJbWFnZURhdGEocGl4ZWxzLCAwLCAwKTtcclxufTtcclxuXHJcbkNhbnZhcy5wcm90b3R5cGUub3BhY2l0eSA9IGZ1bmN0aW9uKCkge1xyXG4gIGxldCBwaXhlbHMgPSB0aGlzLmdldFBpeGVsRGF0YSgpO1xyXG4gIGxldCBkID0gcGl4ZWxzLmRhdGE7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBkLmxlbmd0aDsgaSArPSA0KSB7XHJcbiAgICBkW2krM10gPSAxNTU7IC8vIG9wYWNpdHlcclxuICB9XHJcbiAgdGhpcy5jdHgucHV0SW1hZ2VEYXRhKHBpeGVscywgMCwgMCk7XHJcbn07XHJcblxyXG5sZXQgYyA9IG5ldyBDYW52YXMoODAwLCA2MDApO1xyXG5jLmRpc3BsYXlDYW52YXMoZG9jdW1lbnQuYm9keSk7XHJcblxyXG5sZXQgaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbmkuc3JjID0gXCJpbWcvdGVybWluYXRvci5qcGVnXCI7XHJcbmkub25sb2FkID0gZnVuY3Rpb24oKXtcclxuICBjLmxvYWRJbWFnZShpKTtcclxufTtcclxuIl19